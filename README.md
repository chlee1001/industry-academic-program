# 산학과제용...

### **농수산물 도매가격**(**중도매인 판매가격**) 크롤링

#### 1차 작업

        1. 기본 크롤링 셋팅완료
        2. 각 조건별 웹에 전달할 key값 수집 완료, 테스트 必
        3. Docker로 MongoDB 설치 완료, 외부망 접속 문제X

#### 2차

        1. key값 수집 완료 및 실제 올바른 값이 전달 되며 정상적으로 페이지 크롤링 되는지 테스트 완료
        2. key값 DB저장 완료
        3. 크롤링 중 일부 셀을 긁어오지 않는 문제 확인 

#### 3차

        1. DB와 연동해 필요한 데이터만 크롤링 코드 완료
        2. Key와 Value 맵핑 완료
        3. 현재 콘솔창에서 날짜별 (존재하는)모든 품목에 대해 크롤링 확인 완료

#### 4차

        1. 사전형으로 저장했던, Key,Value 순서 변경함 --> DB에 저장과 출력이 아마 용이할듯?
            1-1. 원래는 저장할 때 key,value를 맵핑시킬려했는데, 애초에 크롤링할때 맵핑함
        2. DB에 저장 완료
            2-2. 현재 이틀연속 저장 테스트 완료..

### 5차

        1. 시작일 지정 (2020.01.01)
        2. 시작일부터 크롤링을 할 경우, 사이트에 요청이 너무 많아 접속 차단되는 에러가 발생했을 때,
            재시작 할 경우, 시작일이 아닌 그 에러난 날짜부터 다시 크롤링 할 수 있도록 조치
        2-1. 매일매일 최신화되야하지만, 몇일 건너뛰었을 경우 중간에 끊긴 날짜부터 다시 시작할 수 있도록 조치

### 6차 작업

        1. 5차작업 일부 개선
        2. 주말 스킵
        3. 에러발생시 대처 테스트중

#### 추후 진행할 것들

        3. 데이터 구조? 생각 必
        7. 우선 코드 정리 (진행중)
        9. 저장된 데이터가 꺼내쓰기 용이한지 확인 / 쉽게 꺼내쓸수있도록
        11. 에러 timeoutError, connectionError 등 발생했을 때 대처...

#### 진행 완료한 목록

        1. 몽고 DB 연결 및 (1차-2)의 값들 저장 (dictionary) (완료) 
        2. 1)의 값들을 이용해서 데이터 수집 및 저장 (완료)
        4. (2차-3)크롤링 하는 테이블 확인 --> colspan, rowspan 확인해볼 것 (완료)
        5. 현재 긁어온 데이터의 key값을 value값으로 변환 후 저장 (완료)
            5-1. DB에 저장 된 값을 읽어와서 매핑 시켜야할 듯 (완료)
        6. 콘촐창에 출력한 것들을 DB에 어떻게 넣을 건지... 생각 必 (완료)
        8. 현재 확인한 문제는 사이트는 주말에 가격을 업데이트하지 않기때문에 아마 토일월 데이터가 동일할듯 (완료)
        10. 사이트에 요청이 많아 에러가 나는 것은 사이트에서 기간별로 조회를 해서 조치할 수 있지만,
            과제에 품목별 조회로 체크되어 있어서 일단 5차 작업과 같이 진행함

![DB캡쳐](https://user-images.githubusercontent.com/2025813/104085997-3a80f000-5297-11eb-95fc-3e181c57076a.png)
![DB캡쳐2](https://user-images.githubusercontent.com/2025813/104310790-a4a7c800-5517-11eb-9184-a1e3703ebdeb.png)

