# 엠로 산학과제 - 시장가격조사

### **2. 축산물 도매가격** 크롤링

#### 1차 작업

    기본 크롤링 셋팅완료
    DB 스키마 간단히 구성완료

<img src="https://user-images.githubusercontent.com/2025813/105574974-6d54d900-5dab-11eb-82f6-bad929ed6ea6.jpg" width="50%" height="50%">

#### 2차 작업

    1일 치 테이블 읽기
    --> 문제가 많음. colspan, rowspan... 어떻게 해야할지...
        ++ 생각해봐야함... 하나하나 확인하면서 저장한 결과... test_result.json에서 볼 수 있음
    --> 해결(3차작업): 그냥 미리 스키마를 구성해놓음.

#### 3차 작업

    소에 관한 1년치 정보 DB에 저장완료
        - 크롤링한 테이블을 이용해서 미리 스키마를 구성해놓고 가격정보 대입
    --> 문제점:
            - 사이트는 월~금 데이터만 존재하고, 해당일의 가격정보는 다음일에 업데이트 됨
                또한, 특정일 하나만 조회할 경우, 일부 값은 '-'로 나오기 때문에 이 부분 고민할 필요가 있음
            - 위의 문제를 기반으로 크롤링 할 때 대입 할 날짜 정보 계산 다시해야함 (원래는 DB에 가장 최신 date~현재 date로 할 계획이었음)

#### 4차 작업

    모든 동물에 대해 크롤링 테스트 완료
        - 소(0), 돼지(1), 계란(3)는 사이트 테이블 구조가 동일
        - 닭은 다르고, 오리는 사이트에 table태그에 문제가 있어서 다음번에 다른 방법테스트 예정

#### 5차작업

    4차작업에 있던 문제 해결

#### 6차작업

    크롤링된 데이터를 DB에 저장하는 구조를 변경하여 3차작업 문제 해결
        - 구조를 변경하면서 각 품목별로 기간사이에 실제 크롤링 된 데이터 개수가 상이해서 여러 문제가 발생했고,
            해결하는 과정에 코드가 일부 더러워짐.코드(190~195) 더 간단히 구현할 수 있을듯...
    --> 일단 원하는 기간만큼의 크롤링 완료

#### 추후 진행할 것들

    1. 테이블에서 필요한 정보만 긁는 중 (완료)
    2. 3차 작업의 문제점 (완료)
    3. 다른 축산물에 대해 크롤링하기 (완료)
    4. 6차작업 코드 수정
